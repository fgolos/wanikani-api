!function t(e,r,n){function o(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[s]={exports:{}};e[s][0].call(f.exports,function(t){var r=e[s][1][t];return o(r?r:t)},f,f.exports,t,e,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,r){var n=t("./util/jsonp"),o=function(){function t(t){this._apiKey=t,this.API_BASE="https://www.wanikani.com/api/v1.3/user/"}return t.prototype.getData=function(t,e){return n.jsonp(this.constructUrl(t,e))},t.prototype.constructUrl=function(t,e){var r=this.API_BASE+this._apiKey+"/"+t+"/";return e&&(r+=e+"/"),r},t}();r.Fetcher=o},{"./util/jsonp":2}],2:[function(t,e,r){var n=t("./objectConvert");r.jsonp=function(t){if(!window.Promise)throw"Promise not available. Please apply a polyfill.";var e=function(t,e){var r=document.createElement("script");return r.src=t+(t.indexOf("?")>=0?"&":"?")+"callback="+e,r};return new Promise(function(r,o){var i="jsonp_callback_"+Math.round(1e5*Math.random()),s=e(t,i);s.onerror=o,document.body.appendChild(s),window[i]=function(t){r(n.convertCase(t)),window[i]=null,delete window[i],document.body.removeChild(s)}})}},{"./objectConvert":3}],3:[function(t,e,r){r.convertCase=function(t){if(!t||"object"!=typeof t)return t;if(t instanceof Array)return t.map(function(t){return r.convertCase(t)});var e={};return Object.keys(t).forEach(function(n){var o=n.replace(/\_(.)/gim,function(t){return t[1].toUpperCase()});e[o]=r.convertCase(t[n])}),e}},{}],4:[function(t,e,r){var n=t("./fetcher"),o=function(){function t(t){if(this._apiKey=t,this._expiryTime=3600,this._userInformation={},this._studyQueue={},this._levelProgress={},this._srsDistribution={},this._recentUnlocks={},this._storageKeys=["_userInformation","_studyQueue","_levelProgress","_srsDistribution","_recentUnlocks"],32!==t.length||!t.match(/[A-z0-9]{32}/))throw"Invalid API Key. API Key must be 32 alphanumeric characters in length.";this._fetcher=new n.Fetcher(t),window.localStorage&&this._loadLocalStorage()}return t.prototype.getUserInformation=function(){var t=this;return this._isValid(this._userInformation)?Promise.resolve(this._userInformation.data):new Promise(function(e,r){var n=t._fetcher.getData("user-information");n.then(function(r){t._setCacheItem(t._userInformation,r),e(r.userInformation)})["catch"](function(){r()})})},t.prototype.getStudyQueue=function(){var t=this;return this._isValid(this._studyQueue)?Promise.resolve(this._studyQueue.data):new Promise(function(e,r){var n=t._fetcher.getData("study-queue");n.then(function(r){t._setCacheItem(t._studyQueue,r),e(r.requestedInformation)})["catch"](function(){r()})})},t.prototype.getLevelProgression=function(){var t=this;return this._isValid(this._levelProgress)?Promise.resolve(this._levelProgress.data):new Promise(function(e,r){var n=t._fetcher.getData("level-progression");n.then(function(r){t._setCacheItem(t._levelProgress,r),e(r.requestedInformation)})["catch"](function(){r()})})},t.prototype.getSrsDistribution=function(){var t=this;return this._isValid(this._srsDistribution)?Promise.resolve(this._srsDistribution.data):new Promise(function(e,r){var n=t._fetcher.getData("srs-distribution");n.then(function(r){t._setCacheItem(t._srsDistribution,r),e(r.requestedInformation)})["catch"](function(){r()})})},t.prototype.getRecentUnlocks=function(t){var e=this;void 0===t&&(t=10);var r=!1;return this._recentUnlocks.data&&(r=this._recentUnlocks.data.length!=t),this._isValid(this._recentUnlocks)&&!r?Promise.resolve(this._recentUnlocks.data):new Promise(function(r,n){var o=e._fetcher.getData("recent-unlocks",t);o.then(function(t){e._setCacheItem(e._recentUnlocks,t),r(t.requestedInformation)})["catch"](function(){n()})})},t.prototype.setExpiry=function(t){this._expiryTime=t},t.prototype._setCacheItem=function(t,e){e.requestedInformation&&(t.data=e.requestedInformation,t.lastUpdated=this._getTime()),e.userInformation&&(this._userInformation={data:e.userInformation,lastUpdated:this._getTime()}),this._persistLocalStorage()},t.prototype._loadLocalStorage=function(){for(var t=0,e=this._storageKeys;t<e.length;t++){var r=e[t];window.localStorage.getItem(r)&&(this[r]=JSON.parse(window.localStorage.getItem(r)))}},t.prototype._persistLocalStorage=function(){for(var t=0,e=this._storageKeys;t<e.length;t++){var r=e[t];this[r]&&window.localStorage.setItem(r,JSON.stringify(this[r]))}},t.prototype._clearLocalStorage=function(){window.localStorage.clear()},t.prototype._isValid=function(t){if(!t)return!1;if(!t.lastUpdated)return!1;var e=this._getTime(),r=t.lastUpdated+this._expiryTime;return r>e},t.prototype._getTime=function(){return(new Date).getTime()/1e3},t}();r.WkApi=o},{"./fetcher":1}],5:[function(t,e,r){(function(e){var r=t("./wkapi");e.WkApi=r.WkApi}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./wkapi":4}]},{},[5]);