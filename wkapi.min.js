!function t(e,n,r){function o(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var f=n[s]={exports:{}};e[s][0].call(f.exports,function(t){var n=e[s][1][t];return o(n?n:t)},f,f.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){var r=t("./util/jsonp"),o=function(){function t(t){this._apiKey=t,this.API_BASE="https://www.wanikani.com/api/v1.3/user/"}return t.prototype.getData=function(t,e){return r.jsonp(this.constructUrl(t,e))},t.prototype.constructUrl=function(t,e){var n=this.API_BASE+this._apiKey+"/"+t+"/";return e&&(n+=e+"/"),n},t}();n.Fetcher=o},{"./util/jsonp":2}],2:[function(t,e,n){var r=t("./objectConvert");n.jsonp=function(t){if(!window.Promise)throw"Promise not available. Please apply a polyfill.";var e=function(t,e){var n=document.createElement("script");return n.src=t+(t.indexOf("?")>=0?"&":"?")+"callback="+e,n};return new Promise(function(n,o){var i="jsonp_callback_"+Math.round(1e5*Math.random()),s=e(t,i);s.onerror=o,document.body.appendChild(s),window[i]=function(t){n(r.convertCase(t)),window[i]=null,delete window[i],document.body.removeChild(s)}})}},{"./objectConvert":3}],3:[function(t,e,n){n.convertCase=function(t){if(!t||"object"!=typeof t)return t;if(t instanceof Array)return t.map(function(t){return n.convertCase(t)});var e={};return Object.keys(t).forEach(function(r){var o=r.replace(/\_(.)/gim,function(t){return t[1].toUpperCase()});e[o]=n.convertCase(t[r])}),e}},{}],4:[function(t,e,n){var r=t("./fetcher"),o=function(){function t(t){this._expiryTime=3600,this._userInformation={},this._studyQueue={},this._levelProgress={},this._srsDistribution={},this._recentUnlocks={},this.storageKeys=["_userInformation","_studyQueue","_levelProgress","_srsDistribution","_recentUnlocks"],this._fetcher=new r.Fetcher(t),window.localStorage&&this.loadLocalStorage()}return t.prototype.getUserInformation=function(){var t=this;return this.isValid(this._userInformation)?Promise.resolve(this._userInformation.data):new Promise(function(e,n){var r=t._fetcher.getData("user-information");r.then(function(n){t.setCacheItem(t._userInformation,n),e(n.userInformation)})["catch"](function(){n()})})},t.prototype.getStudyQueue=function(){var t=this;return this.isValid(this._studyQueue)?Promise.resolve(this._studyQueue.data):new Promise(function(e,n){var r=t._fetcher.getData("study-queue");r.then(function(n){t.setCacheItem(t._studyQueue,n),e(n.requestedInformation)})["catch"](function(){n()})})},t.prototype.getLevelProgression=function(){var t=this;return this.isValid(this._levelProgress)?Promise.resolve(this._levelProgress.data):new Promise(function(e,n){var r=t._fetcher.getData("level-progression");r.then(function(n){t.setCacheItem(t._levelProgress,n),e(n.requestedInformation)})["catch"](function(){n()})})},t.prototype.getSrsDistribution=function(){var t=this;return this.isValid(this._srsDistribution)?Promise.resolve(this._srsDistribution.data):new Promise(function(e,n){var r=t._fetcher.getData("srs-distribution");r.then(function(n){t.setCacheItem(t._srsDistribution,n),e(n.requestedInformation)})["catch"](function(){n()})})},t.prototype.getRecentUnlocks=function(t){var e=this;void 0===t&&(t=10);var n=!1;return this._recentUnlocks.data&&(n=this._recentUnlocks.data.length!=t),this.isValid(this._recentUnlocks)&&!n?Promise.resolve(this._recentUnlocks.data):new Promise(function(n,r){var o=e._fetcher.getData("recent-unlocks",t);o.then(function(t){e.setCacheItem(e._recentUnlocks,t),n(t.requestedInformation)})["catch"](function(){r()})})},t.prototype.setExpiry=function(t){this._expiryTime=t},t.prototype.setCacheItem=function(t,e){e.requestedInformation&&(t.data=e.requestedInformation,t.lastUpdated=this.getTime()),e.userInformation&&(this._userInformation={data:e.userInformation,lastUpdated:this.getTime()}),this.persistLocalStorage()},t.prototype.loadLocalStorage=function(){for(var t=0,e=this.storageKeys;t<e.length;t++){var n=e[t];window.localStorage.getItem(n)&&(this[n]=JSON.parse(window.localStorage.getItem(n)))}},t.prototype.persistLocalStorage=function(){for(var t=0,e=this.storageKeys;t<e.length;t++){var n=e[t];this[n]&&window.localStorage.setItem(n,JSON.stringify(this[n]))}},t.prototype.clearLocalStorage=function(){window.localStorage.clear()},t.prototype.isValid=function(t){if(!t)return!1;if(!t.lastUpdated)return!1;var e=this.getTime(),n=t.lastUpdated+this._expiryTime;return n>e},t.prototype.getTime=function(){return(new Date).getTime()/1e3},t}();n.WkCache=o},{"./fetcher":1}],5:[function(t,e,n){var r=t("./wkCache"),o=function(){function t(t){if(this._apiKey=t,32!==t.length||!t.match(/[A-z0-9]{32}/))throw"Invalid API Key. API Key must be 32 alphanumeric characters in length.";this._cache=new r.WkCache(t)}return t.prototype.setExpiry=function(t){this._cache.setExpiry(t)},t.prototype.getUserInformation=function(){return this._cache.getUserInformation()},t.prototype.getStudyQueue=function(){return this._cache.getStudyQueue()},t.prototype.getLevelProgression=function(){return this._cache.getLevelProgression()},t.prototype.getSrsDistribution=function(){return this._cache.getSrsDistribution()},t.prototype.getRecentUnlocks=function(t){return void 0===t&&(t=10),this._cache.getRecentUnlocks(t)},t}();n.WkApi=o},{"./wkCache":4}],6:[function(t,e,n){(function(e){var n=t("./wkapi");e.WkApi=n.WkApi}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./wkapi":5}]},{},[6]);